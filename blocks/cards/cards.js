import { createOptimizedPicture } from '../../scripts/lib-franklin.js';

export default function decorate(block) {
  /* change to ul, li */
  const ul = document.createElement('ul');
  [...block.children].forEach((row) => {
    const li = document.createElement('li');
    li.innerHTML = row.innerHTML;
    [...li.children].forEach((div) => {
      if (div.children.length === 1 && div.querySelector('picture')) div.className = 'cards-card-image';
      else div.className = 'cards-card-body';
    });
    ul.append(li);
  });
  ul.querySelectorAll('img').forEach((img) => img.closest('picture').replaceWith(createOptimizedPicture(img.src, img.alt, false, [{ width: '750' }])));
  block.textContent = '';
  const dateContainer = ul.querySelector('.cards-card-body');
  //dateContainer.innerHTML = '';

dateContainer.append(document.createRange().createContextualFragment(
    '<div class="card-calendar mt-[8px] shrink-0 group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" fill="currentColor" viewBox="0 0 34 39" role="img" aria-hidden="false" class="mr-[16px] w-[16px] h-[16px]"><title>Calendar</title><path d="M30.2578 5.5C31.2227 5.5 32.0391 5.87109 32.7812 6.53906C33.4492 7.28125 33.8203 8.09766 33.8203 9.0625V35.1875C33.8203 36.2266 33.4492 37.043 32.7812 37.7109C32.0391 38.4531 31.2227 38.75 30.2578 38.75H4.13281C3.09375 38.75 2.27734 38.4531 1.60938 37.7109C0.867188 37.043 0.570312 36.2266 0.570312 35.1875V9.0625C0.570312 8.09766 0.867188 7.28125 1.60938 6.53906C2.27734 5.87109 3.09375 5.5 4.13281 5.5H7.69531V1.64062C7.69531 1.41797 7.76953 1.19531 7.91797 1.04688C8.06641 0.898438 8.28906 0.75 8.58594 0.75H9.17969C9.40234 0.75 9.625 0.898438 9.77344 1.04688C9.92188 1.19531 10.0703 1.41797 10.0703 1.64062V5.5H24.3203V1.64062C24.3203 1.41797 24.3945 1.19531 24.543 1.04688C24.6914 0.898438 24.9141 0.75 25.2109 0.75H25.8047C26.0273 0.75 26.25 0.898438 26.3984 1.04688C26.5469 1.19531 26.6953 1.41797 26.6953 1.64062V5.5H30.2578ZM4.13281 7.875C3.76172 7.875 3.46484 8.02344 3.24219 8.24609C3.01953 8.46875 2.94531 8.76562 2.94531 9.0625V12.625H31.4453V9.0625C31.4453 8.76562 31.2969 8.46875 31.0742 8.24609C30.8516 8.02344 30.5547 7.875 30.2578 7.875H4.13281ZM30.2578 36.375C30.5547 36.375 30.8516 36.3008 31.0742 36.0781C31.2969 35.8555 31.4453 35.5586 31.4453 35.1875V15H2.94531V35.1875C2.94531 35.5586 3.01953 35.8555 3.24219 36.0781C3.46484 36.3008 3.76172 36.375 4.13281 36.375H30.2578ZM11.5547 24.5C11.7773 24.5 12 24.4258 12.1484 24.2773C12.2969 24.1289 12.4453 23.9062 12.4453 23.6094V20.6406C12.4453 20.418 12.2969 20.1953 12.1484 20.0469C12 19.8984 11.7773 19.75 11.5547 19.75H8.58594C8.28906 19.75 8.06641 19.8984 7.91797 20.0469C7.76953 20.1953 7.69531 20.418 7.69531 20.6406V23.6094C7.69531 23.9062 7.76953 24.1289 7.91797 24.2773C8.06641 24.4258 8.28906 24.5 8.58594 24.5H11.5547ZM18.6797 24.5C18.9023 24.5 19.125 24.4258 19.2734 24.2773C19.4219 24.1289 19.5703 23.9062 19.5703 23.6094V20.6406C19.5703 20.418 19.4219 20.1953 19.2734 20.0469C19.125 19.8984 18.9023 19.75 18.6797 19.75H15.7109C15.4141 19.75 15.1914 19.8984 15.043 20.0469C14.8945 20.1953 14.8203 20.418 14.8203 20.6406V23.6094C14.8203 23.9062 14.8945 24.1289 15.043 24.2773C15.1914 24.4258 15.4141 24.5 15.7109 24.5H18.6797ZM25.8047 24.5C26.0273 24.5 26.25 24.4258 26.3984 24.2773C26.5469 24.1289 26.6953 23.9062 26.6953 23.6094V20.6406C26.6953 20.418 26.5469 20.1953 26.3984 20.0469C26.25 19.8984 26.0273 19.75 25.8047 19.75H22.8359C22.5391 19.75 22.3164 19.8984 22.168 20.0469C22.0195 20.1953 21.9453 20.418 21.9453 20.6406V23.6094C21.9453 23.9062 22.0195 24.1289 22.168 24.2773C22.3164 24.4258 22.5391 24.5 22.8359 24.5H25.8047ZM18.6797 31.625C18.9023 31.625 19.125 31.5508 19.2734 31.4023C19.4219 31.2539 19.5703 31.0312 19.5703 30.7344V27.7656C19.5703 27.543 19.4219 27.3203 19.2734 27.1719C19.125 27.0234 18.9023 26.875 18.6797 26.875H15.7109C15.4141 26.875 15.1914 27.0234 15.043 27.1719C14.8945 27.3203 14.8203 27.543 14.8203 27.7656V30.7344C14.8203 31.0312 14.8945 31.2539 15.043 31.4023C15.1914 31.5508 15.4141 31.625 15.7109 31.625H18.6797ZM11.5547 31.625C11.7773 31.625 12 31.5508 12.1484 31.4023C12.2969 31.2539 12.4453 31.0312 12.4453 30.7344V27.7656C12.4453 27.543 12.2969 27.3203 12.1484 27.1719C12 27.0234 11.7773 26.875 11.5547 26.875H8.58594C8.28906 26.875 8.06641 27.0234 7.91797 27.1719C7.76953 27.3203 7.69531 27.543 7.69531 27.7656V30.7344C7.69531 31.0312 7.76953 31.2539 7.91797 31.4023C8.06641 31.5508 8.28906 31.625 8.58594 31.625H11.5547ZM25.8047 31.625C26.0273 31.625 26.25 31.5508 26.3984 31.4023C26.5469 31.2539 26.6953 31.0312 26.6953 30.7344V27.7656C26.6953 27.543 26.5469 27.3203 26.3984 27.1719C26.25 27.0234 26.0273 26.875 25.8047 26.875H22.8359C22.5391 26.875 22.3164 27.0234 22.168 27.1719C22.0195 27.3203 21.9453 27.543 21.9453 27.7656V30.7344C21.9453 31.0312 22.0195 31.2539 22.168 31.4023C22.3164 31.5508 22.5391 31.625 22.8359 31.625H25.8047Z" fill="currentColor"></path></svg><span class="text-[14px] ">June 1, 2023</span></div>',
  ));
  block.append(ul);


}
